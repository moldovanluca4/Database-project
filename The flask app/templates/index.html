<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Campus Information Center</title>
    
    <link rel="stylesheet" href="{{url_for('static', filename='style.css')}}"/>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>

    <style>
      .dropdown {
        position: relative;
        display: inline-block;
      }
      .dropdown-content {
        display: none; 
        position: absolute;
        background-color: #f9f9f9;
        min-width: 160px;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        z-index: 1000; 
      }
      .dropdown-content a {
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
      }
     
      .dropdown-content a:hover {background-color: #f1f1f1}
     
      .dropdown:hover .dropdown-content {
        display: block;
      }
    </style>
</head>

<body>
    <header class="container header-flex-wrapper">
        <div id="logo">
            <img src="{{url_for('static', filename='campus_logo.png')}}">
            <h1><a href="{{url_for('home')}}">Campus Information Center</a></h1>
        </div>

        <nav>
            <ul>
                <li class="current_page_item"><a href="{{url_for('home')}}">Home</a></li>
                <li class="dropdown">
                  <a href="javascript:void(0)" class="dropbtn" onclick="toggleMenu()">Menu</a>
                  <div id="myDropdown" class="dropdown-content">
                    <a href="{{url_for('show_building_search')}}">Search for Gym personnel</a>
                    <a href="{{url_for('show_event_search')}}">Search for a sport tournament</a>
                    <a href="{{url_for('show_venue_search')}}">Search for a Lecture hall</a>
                    <a href="{{url_for('new_search_building')}}">New search method for Building</a>
                    <a href="{{ url_for('new_search_event') }}">New Tournament Search</a>
                    <a href="{{ url_for('new_search_lecture_hall') }}">New search method for Lecture Hall</a>
                  </div>
                </li>
                <li><a href="{{url_for('imprint')}}">Imprint</a></li>
                <li><a href="{{url_for('maintenance')}}">Maintenance Page</a></li>
                <li><a href="{{url_for('register')}}">Register</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <div class="main-content">
            <div class="title">
                <h2>About us</h2>
            </div>
        
            <p>Welcome to Campus Information Center!</p>
            <p>
                Thank you for visiting the Campus Information Center. 
                Whether you are a student, professor, staff member, 
                or a guest of the University, 
                this website is your central hub for staying in touch.
                We are here to help you stay connected with everything happening 
                around the university and learn more about our vibrant campus community.
            </p>
            <hr>
        </div>
        
        <p id="greeting" style="text-align: center; font-weight: bold; color: #555; margin-bottom: 10px;">
            Locating you...
        </p>

        <div id="map" style="height: 400px; width: 85%; margin: 20px auto; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);"></div>
    </main>

    <footer class="container">
        <p>&copy; 2025 Campus Information Center. All rights reserved.</p>
    </footer>

    <script>
        function toggleMenu() {
          document.getElementById("myDropdown").classList.toggle("show");
        }

        window.onclick = function(event) {
          if (!event.target.matches('.dropbtn')) {
            var dropdowns = document.getElementsByClassName("dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        }
    </script>

    <script>
      fetch("https://ipinfo.io/json")
      .then(response => response.json())
      .then(data => {
        var greetingText = "Thanks for visiting us from " + data.city + ", " + data.country;
        document.getElementById("greeting").innerText = greetingText;

        var location = data.loc.split(',');
        var lat = location[0];
        var lon = location[1];
        
        var map = L.map('map').setView([lat,lon], 13);
      
        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png',{
          maxZoom: 19,
          attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map); 
        
        L.marker([lat, lon]).addTo(map)
        .bindPopup("Your IP: " + data.ip)
        .openPopup();
      })
      .catch(error => {
        console.error("Error getting the Ip address: ", error);
        document.getElementById("greeting").innerText = "Thanks for visiting us! (Location not found)";
      });
    </script>
</body>
</html>